{"ast":null,"code":"import { inject, signal } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { tap } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nexport class CartService {\n  constructor() {\n    this.http = inject(HttpClient);\n    this.apiUrl = 'http://localhost:3000/cart';\n    // Signal for reactive cart count\n    this.cartCount = signal(0);\n  }\n  getAll() {\n    return this.http.get(this.apiUrl).pipe(tap(items => this.cartCount.set(items.length)));\n  }\n  add(item) {\n    return this.http.post(this.apiUrl, item).pipe(tap(() => this.updateCartCount()));\n  }\n  update(id, item) {\n    return this.http.put(`${this.apiUrl}/${id}`, item);\n  }\n  delete(id) {\n    return this.http.delete(`${this.apiUrl}/${id}`).pipe(tap(() => this.updateCartCount()));\n  }\n  clear() {\n    return this.getAll().pipe(tap(items => {\n      items.forEach(item => {\n        if (item.id) this.delete(item.id).subscribe();\n      });\n      this.cartCount.set(0);\n    }));\n  }\n  updateCartCount() {\n    this.getAll().subscribe();\n  }\n  static {\n    this.ɵfac = function CartService_Factory(t) {\n      return new (t || CartService)();\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: CartService,\n      factory: CartService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["inject","signal","HttpClient","tap","CartService","constructor","http","apiUrl","cartCount","getAll","get","pipe","items","set","length","add","item","post","updateCartCount","update","id","put","delete","clear","forEach","subscribe","factory","ɵfac","providedIn"],"sources":["C:\\Users\\SMK\\OneDrive\\Desktop\\internet pr\\src\\app\\services\\cart.service.ts"],"sourcesContent":["import { Injectable, inject, signal } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { CartItem } from '../models/cart-item.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CartService {\n  private http = inject(HttpClient);\n  private apiUrl = 'http://localhost:3000/cart';\n\n  // Signal for reactive cart count\n  cartCount = signal<number>(0);\n\n  getAll(): Observable<CartItem[]> {\n    return this.http.get<CartItem[]>(this.apiUrl).pipe(\n      tap(items => this.cartCount.set(items.length))\n    );\n  }\n\n  add(item: CartItem): Observable<CartItem> {\n    return this.http.post<CartItem>(this.apiUrl, item).pipe(\n      tap(() => this.updateCartCount())\n    );\n  }\n\n  update(id: number, item: CartItem): Observable<CartItem> {\n    return this.http.put<CartItem>(`${this.apiUrl}/${id}`, item);\n  }\n\n  delete(id: number): Observable<void> {\n    return this.http.delete<void>(`${this.apiUrl}/${id}`).pipe(\n      tap(() => this.updateCartCount())\n    );\n  }\n\n  clear(): Observable<void[]> {\n    return this.getAll().pipe(\n      tap(items => {\n        items.forEach(item => {\n          if (item.id) this.delete(item.id).subscribe();\n        });\n        this.cartCount.set(0);\n      })\n    ) as any;\n  }\n\n  private updateCartCount(): void {\n    this.getAll().subscribe();\n  }\n}\n"],"mappings":"AAAA,SAAqBA,MAAM,EAAEC,MAAM,QAAQ,eAAe;AAC1D,SAASC,UAAU,QAAQ,sBAAsB;AAEjD,SAASC,GAAG,QAAQ,gBAAgB;;AAMpC,OAAM,MAAOC,WAAW;EAHxBC,YAAA;IAIU,KAAAC,IAAI,GAAGN,MAAM,CAACE,UAAU,CAAC;IACzB,KAAAK,MAAM,GAAG,4BAA4B;IAE7C;IACA,KAAAC,SAAS,GAAGP,MAAM,CAAS,CAAC,CAAC;;EAE7BQ,MAAMA,CAAA;IACJ,OAAO,IAAI,CAACH,IAAI,CAACI,GAAG,CAAa,IAAI,CAACH,MAAM,CAAC,CAACI,IAAI,CAChDR,GAAG,CAACS,KAAK,IAAI,IAAI,CAACJ,SAAS,CAACK,GAAG,CAACD,KAAK,CAACE,MAAM,CAAC,CAAC,CAC/C;EACH;EAEAC,GAAGA,CAACC,IAAc;IAChB,OAAO,IAAI,CAACV,IAAI,CAACW,IAAI,CAAW,IAAI,CAACV,MAAM,EAAES,IAAI,CAAC,CAACL,IAAI,CACrDR,GAAG,CAAC,MAAM,IAAI,CAACe,eAAe,EAAE,CAAC,CAClC;EACH;EAEAC,MAAMA,CAACC,EAAU,EAAEJ,IAAc;IAC/B,OAAO,IAAI,CAACV,IAAI,CAACe,GAAG,CAAW,GAAG,IAAI,CAACd,MAAM,IAAIa,EAAE,EAAE,EAAEJ,IAAI,CAAC;EAC9D;EAEAM,MAAMA,CAACF,EAAU;IACf,OAAO,IAAI,CAACd,IAAI,CAACgB,MAAM,CAAO,GAAG,IAAI,CAACf,MAAM,IAAIa,EAAE,EAAE,CAAC,CAACT,IAAI,CACxDR,GAAG,CAAC,MAAM,IAAI,CAACe,eAAe,EAAE,CAAC,CAClC;EACH;EAEAK,KAAKA,CAAA;IACH,OAAO,IAAI,CAACd,MAAM,EAAE,CAACE,IAAI,CACvBR,GAAG,CAACS,KAAK,IAAG;MACVA,KAAK,CAACY,OAAO,CAACR,IAAI,IAAG;QACnB,IAAIA,IAAI,CAACI,EAAE,EAAE,IAAI,CAACE,MAAM,CAACN,IAAI,CAACI,EAAE,CAAC,CAACK,SAAS,EAAE;MAC/C,CAAC,CAAC;MACF,IAAI,CAACjB,SAAS,CAACK,GAAG,CAAC,CAAC,CAAC;IACvB,CAAC,CAAC,CACI;EACV;EAEQK,eAAeA,CAAA;IACrB,IAAI,CAACT,MAAM,EAAE,CAACgB,SAAS,EAAE;EAC3B;;;uBA1CWrB,WAAW;IAAA;EAAA;;;aAAXA,WAAW;MAAAsB,OAAA,EAAXtB,WAAW,CAAAuB,IAAA;MAAAC,UAAA,EAFV;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}